<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="search" type="application/opensearchdescription+xml" title="Konstellation" href="/opensearch.xml"><title data-react-helmet="true">App Manifest | Konstellation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="App Manifest | Konstellation"><meta data-react-helmet="true" name="description" content="App.yaml"><meta data-react-helmet="true" property="og:description" content="App.yaml"><meta data-react-helmet="true" property="og:url" content="https://konstellation.dev/docs/reference/manifest"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://konstellation.dev/docs/reference/manifest"><link rel="stylesheet" href="/styles.d4a37da5.css">
<link rel="preload" href="/styles.3cdb5148.js" as="script">
<link rel="preload" href="/runtime~main.8ab41bae.js" as="script">
<link rel="preload" href="/main.1807bde1.js" as="script">
<link rel="preload" href="/1.3c02cc62.js" as="script">
<link rel="preload" href="/2.694aefcc.js" as="script">
<link rel="preload" href="/29.7c6873eb.js" as="script">
<link rel="preload" href="/33.7caa915a.js" as="script">
<link rel="preload" href="/20ac7829.eb314f58.js" as="script">
<link rel="preload" href="/17896441.3f5aa49e.js" as="script">
<link rel="preload" href="/cff15f4e.d52424d4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_light.png" alt="Konstellation Logo"><strong class="navbar__title">Konstellation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/konstellation/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/k11n/konstellation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_light.png" alt="Konstellation Logo"><strong class="navbar__title">Konstellation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/konstellation/introduction">Docs</a></li><li class="menu__list-item"><a href="https://github.com/k11n/konstellation" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Konstellation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/konstellation/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/konstellation/why">Why Konstellation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/konstellation/principles">Principles</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/deploy">Deploying Your First App</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Working With Apps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apps/basics">The Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apps/configuration">Config &amp; Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apps/develop">Development &amp; Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apps/services">Microservices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/apps/monitoring">Monitoring</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Cluster Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clusters/creation">Cluster Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clusters/users">Managing Users</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clusters/networking">Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clusters/upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clusters/migration">Cluster Migration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reference/manifest">App Manifest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/linkedserviceaccount">Linked Service Account</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">App Manifest</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="appyaml"></a>App.yaml<a aria-hidden="true" tabindex="-1" class="hash-link" href="#appyaml" title="Direct link to heading">#</a></h2><p>The main entry point, the app manifest is the single source of truth to how an app should be deployed. This section serves as a reference to the nitty gritty details of the app yaml.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">registry</td><td align="left">string</td><td align="left">no</td><td align="left">Docker registry where your image is hosted at. Defaults to Docker Hub</td></tr><tr><td align="left">image</td><td align="left">string</td><td align="left">yes</td><td align="left">Docker image of the app</td></tr><tr><td align="left">imageTag</td><td align="left">string</td><td align="left">no</td><td align="left">Tag to use for the initial release</td></tr><tr><td align="left">ports</td><td align="left">List[<a href="#portspec">PortSpec</a>]</td><td align="left">no</td><td align="left">Ports that the app surfaces</td></tr><tr><td align="left">command</td><td align="left">List[string]</td><td align="left">no</td><td align="left">Override for your docker image&#x27;s ENTRYPOINT</td></tr><tr><td align="left">args</td><td align="left">List[string]</td><td align="left">no</td><td align="left">Arguments to the entrypoint. The docker image&#x27;s CMD is used if this is not provided.</td></tr><tr><td align="left">configs</td><td align="left">List[string]</td><td align="left">no</td><td align="left"><a href="/docs/apps/configuration#shared-config">Shared Configs</a> that the app needs</td></tr><tr><td align="left">dependencies</td><td align="left">List[<a href="#appreference">AppReference</a>]</td><td align="left">no</td><td align="left">List of other apps the current app depends on</td></tr><tr><td align="left">serviceAccount</td><td align="left">string</td><td align="left">no</td><td align="left">Name of <a href="/docs/reference/linkedserviceaccount">LinkedServiceAccount</a> or <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/" target="_blank" rel="noopener noreferrer">ServiceAccount</a> that the app should use.</td></tr><tr><td align="left">resources</td><td align="left"><a href="#resource-requirements">ResourceRequirements</a></td><td align="left">no</td><td align="left">Define CPU/Memory requests and limits</td></tr><tr><td align="left">scale</td><td align="left"><a href="#scalespec">ScaleSpec</a></td><td align="left">no</td><td align="left">Scaling limits and behavior</td></tr><tr><td align="left">probes</td><td align="left"><a href="#probeconfig">ProbeConfig</a></td><td align="left">no</td><td align="left">Probes to determine app readiness and liveness</td></tr><tr><td align="left">prometheus</td><td align="left"><a href="#prometheusspec">PrometheusSpec</a></td><td align="left">no</td><td align="left">Define Prometheus scraping</td></tr><tr><td align="left">targets</td><td align="left">List[<a href="#targetconfig">TargetConfig</a>]</td><td align="left">yes</td><td align="left">Define one or more targets</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="appreference"></a>AppReference<a aria-hidden="true" tabindex="-1" class="hash-link" href="#appreference" title="Direct link to heading">#</a></h2><p>References an app as a dependency. Once you specify another app as a dependency, its connection string will be made available as an environment variable.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">string</td><td align="left">yes</td><td align="left">Name of the app</td></tr><tr><td align="left">target</td><td align="left">string</td><td align="left">no</td><td align="left">Target you are dependent upon, by default, it&#x27;s the same target as the current running app</td></tr><tr><td align="left">port</td><td align="left">string</td><td align="left">no</td><td align="left">Name of the port you need, when undefined, it references all defined ports.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ingressconfig"></a>IngressConfig<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ingressconfig" title="Direct link to heading">#</a></h2><p>Specification for an Ingress. An Ingress always listens on port 80/443 externally. SSL is terminated automatically at the load balancer automatically as long if there&#x27;s a matching certificate on ACM. See <a href="/docs/apps/basics#setting-up-ssl">Setting up SSL</a></p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">hosts</td><td align="left">List[string]</td><td align="left">yes</td><td align="left">A list of hostnames that the target should run on</td></tr><tr><td align="left">port</td><td align="left">string</td><td align="left">no</td><td align="left">Target port that traffic should be routed to. Defaults to the first defined port.</td></tr><tr><td align="left">paths</td><td align="left">List[string]</td><td align="left">no</td><td align="left">List of paths to route to the current app. When left empty, it&#x27;ll serve all traffic on listed hosts.</td></tr><tr><td align="left">requireHttps</td><td align="left">bool</td><td align="left">no</td><td align="left">When set, it&#x27;ll redirect HTTP traffic to HTTPS</td></tr><tr><td align="left">annotations</td><td align="left">Map{string: string}</td><td align="left">no</td><td align="left">Custom annotation for the Ingress resource</td></tr></tbody></table><p>Konstellation supports both host and path based routing, making it possible for multiple apps to serve different paths. For example, with the following apps</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">api-server.yaml</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k11n.dev/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> App</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ingress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> myhost.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /api/</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">main-app.yaml</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> k11n.dev/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> App</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ingress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> myhost.com</span></div></div></div></div></div><p>myhost.com/api/* will be routed to <code>api-server</code>, while all other requests will be routed to <code>main-app</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="portspec"></a>PortSpec<a aria-hidden="true" tabindex="-1" class="hash-link" href="#portspec" title="Direct link to heading">#</a></h2><p>Specification for a port</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">string</td><td align="left">yes</td><td align="left">Name of the port. This will be used to reference the port elsewhere</td></tr><tr><td align="left">port</td><td align="left">int</td><td align="left">yes</td><td align="left">Port that the app listens on</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="probe"></a>Probe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#probe" title="Direct link to heading">#</a></h2><p>Probes allows Kubernetes to understand the state of the app so that it could act accordingly.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">httpGet</td><td align="left">HTTPGetAction</td><td align="left">no</td><td align="left">Set if using HTTP probes</td></tr><tr><td align="left">exec</td><td align="left"><a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/#execaction-v1-core" target="_blank" rel="noopener noreferrer">ExecAction</a></td><td align="left">no</td><td align="left">Set if using command line probes</td></tr><tr><td align="left">initialDelaySeconds</td><td align="left">int</td><td align="left">no</td><td align="left">Number of seconds after the container has started before probes are initiated.</td></tr><tr><td align="left">timeoutSeconds</td><td align="left">int</td><td align="left">no</td><td align="left">Number of seconds after which the probe times out. Defaults to 1 second.</td></tr><tr><td align="left">periodSeconds</td><td align="left">int</td><td align="left">no</td><td align="left">How often (in seconds) to perform the probe. Default to 10 seconds.</td></tr><tr><td align="left">successThreshold</td><td align="left">int</td><td align="left">no</td><td align="left">Minimum consecutive successes for the probe to be considered successful after having failed. Defaults to 1.</td></tr><tr><td align="left">failureThreshold</td><td align="left">int</td><td align="left">no</td><td align="left">Minimum consecutive failures for the probe to be considered failed after having succeeded. Defaults to 3.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="http-probe-example"></a>HTTP Probe Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#http-probe-example" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /running</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div></div></div><p>The probe considers a status code that&#x27;s not 200 as a failure</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="exec-probe-example"></a>Exec Probe Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#exec-probe-example" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">exec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> cat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /tmp/healthy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div></div></div><p>The probe considers a non-zero return code as a failure</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="probeconfig"></a>ProbeConfig<a aria-hidden="true" tabindex="-1" class="hash-link" href="#probeconfig" title="Direct link to heading">#</a></h2><p>ProbeConfig is a container for probe definitions.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">liveness</td><td align="left"><a href="#probe">Probe</a></td><td align="left">no</td><td align="left">Determines if the app is still running, when this probe fails, Kubernetes will restart the app</td></tr><tr><td align="left">readiness</td><td align="left"><a href="#probe">Probe</a></td><td align="left">no</td><td align="left">Determines if the app is ready to serve traffic. Sometimes an app may need to load large amount of data before it&#x27;s ready to serve traffic. An app that isn&#x27;t reporting it&#x27;s ready will not receive traffic</td></tr></tbody></table><p>Example</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">probes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">liveness</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /running</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">readiness</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /ready</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="resource-requirements"></a>Resource Requirements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#resource-requirements" title="Direct link to heading">#</a></h2><p>Identical to <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" target="_blank" rel="noopener noreferrer">Kubernetes Resource Requirements</a></p><p>Example</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;100Mi&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1000m&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;200Mi&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;1200m&#x27;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prometheusspec"></a>PrometheusSpec<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prometheusspec" title="Direct link to heading">#</a></h2><p>Defines Prometheus metrics scraping behavior. The fields below are translated into Prometheus Operator types.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">endpoints</td><td align="left">List[<a href="https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#endpoint" target="_blank" rel="noopener noreferrer">Endpoint</a>]</td><td align="left">yes</td><td align="left">Endpoints to scrape</td></tr><tr><td align="left">rules</td><td align="left">List[<a href="https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md#rule" target="_blank" rel="noopener noreferrer">Rules</a>]</td><td align="left">no</td><td align="left">Recording and alerting rules</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scalespec"></a>ScaleSpec<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scalespec" title="Direct link to heading">#</a></h2><p>Controls the scaling behavior of the app. All fields must be defined in order for the autoscaler to be activated.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">targetCPUUtilizationPercentage</td><td align="left">string</td><td align="left">no</td><td align="left">Scale up or down to get to this level of ideal CPU utilization</td></tr><tr><td align="left">min</td><td align="left">int</td><td align="left">no</td><td align="left">Min number of instances. Default 1</td></tr><tr><td align="left">max</td><td align="left">int</td><td align="left">no</td><td align="left">Max number of instances. Defaults to same as min</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="targetconfig"></a>TargetConfig<a aria-hidden="true" tabindex="-1" class="hash-link" href="#targetconfig" title="Direct link to heading">#</a></h2><p>Defines for the behavior for the target. The target name must match one of the supported targets in your cluster config in order for the app to be deployed on that cluster.</p><table><thead><tr><th align="left">Field</th><th align="left">Type</th><th align="left">Required</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">name</td><td align="left">string</td><td align="left">yes</td><td align="left">Name of the target</td></tr><tr><td align="left">ingress</td><td align="left"><a href="#ingressconfig">IngressConfig</a></td><td align="left">no</td><td align="left">Define an ingress if it should have a load balancer endpoint</td></tr><tr><td align="left">resources</td><td align="left"><a href="#resource-requirements">ResourceRequirements</a></td><td align="left">no</td><td align="left">Override the app&#x27;s resource requirements</td></tr><tr><td align="left">scale</td><td align="left"><a href="#scalespec">ScaleSpec</a></td><td align="left">no</td><td align="left">Override the app&#x27;s scaling behavior</td></tr><tr><td align="left">probes</td><td align="left"><a href="#probeconfig">ProbeConfig</a></td><td align="left">no</td><td align="left">Override the app&#x27;s probes</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="examples"></a>Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><p><a href="https://github.com/k11n/konstellation/blob/master/config/samples/2048.yaml" target="_blank" rel="noopener noreferrer">Minimal example</a></p><p><a href="https://github.com/k11n/konstellation/blob/master/config/samples/ecr_app.yaml" target="_blank" rel="noopener noreferrer">Using ECR</a></p><p><a href="https://github.com/k11n/konstellation/blob/master/config/samples/ingress_ssl.yaml" target="_blank" rel="noopener noreferrer">Requires HTTPS</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/k11n/konstellation/edit/master/website/docs/reference/manifest.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/clusters/migration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Cluster Migration</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/linkedserviceaccount"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Linked Service Account Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#appyaml" class="table-of-contents__link">App.yaml</a></li><li><a href="#appreference" class="table-of-contents__link">AppReference</a></li><li><a href="#ingressconfig" class="table-of-contents__link">IngressConfig</a></li><li><a href="#portspec" class="table-of-contents__link">PortSpec</a></li><li><a href="#probe" class="table-of-contents__link">Probe</a><ul><li><a href="#http-probe-example" class="table-of-contents__link">HTTP Probe Example</a></li><li><a href="#exec-probe-example" class="table-of-contents__link">Exec Probe Example</a></li></ul></li><li><a href="#probeconfig" class="table-of-contents__link">ProbeConfig</a></li><li><a href="#resource-requirements" class="table-of-contents__link">Resource Requirements</a></li><li><a href="#prometheusspec" class="table-of-contents__link">PrometheusSpec</a></li><li><a href="#scalespec" class="table-of-contents__link">ScaleSpec</a></li><li><a href="#targetconfig" class="table-of-contents__link">TargetConfig</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Introduction</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/konstellation/introduction">Intro</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/konstellation/why">Why Konstellation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/konstellation/principles">Design Principles</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/apps/basics">Working with Apps</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/clusters/creation">Cluster Operation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference/manifest">Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/k11n/konstellation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Apache 2.0 Licensed.</div></div></div></footer></div>
<script src="/styles.3cdb5148.js"></script>
<script src="/runtime~main.8ab41bae.js"></script>
<script src="/main.1807bde1.js"></script>
<script src="/1.3c02cc62.js"></script>
<script src="/2.694aefcc.js"></script>
<script src="/29.7c6873eb.js"></script>
<script src="/33.7caa915a.js"></script>
<script src="/20ac7829.eb314f58.js"></script>
<script src="/17896441.3f5aa49e.js"></script>
<script src="/cff15f4e.d52424d4.js"></script>
</body>
</html>